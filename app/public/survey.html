<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Friend Finder Survey</title>

	<!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Asap|Francois+One" rel="stylesheet">
    <link rel="stylesheet" href="style.css">

</head>
<body>

    
<nav class="navbar navbar-default" role="navigation">
  <h3 class="navbar-brand pull-right text-white">Survey Questions</h3>
    <div class="navbar-header">
      <a class="navbar-brand pull-right" href="/home">
        <button class="btn btn-lg" id="home-button">
          <span class="fa fa-home"></span>
        </button>
      </a>
    </div>
</nav>

<!-- Survey Form -->
<main class="container">

<h1><strong>Friend Finder</strong></h1>
	<hr>
<h4>Ready to meet other people in your area that share similar interests? Look no further!</h4>
	<br>

<h3><strong>About You</strong></h3>
	<hr>
<h4>Name</h4>
	<input type="text" name="" id="name" class="form-control" required>

<h4>Link to Photo Image</h4>
	<input type="text" name="" id="photo" class="form-control" required>
	<hr>

<h4><strong>Question 1</strong></h4>
	<h5>You love going hiking, camping, and traveling with friends.</h5>
	 	<select class="chosen-select" id="q1" required>
			 <option selected>Pick One</option>
       <option value="1">1 (Strongly Disagree)</option>
       <option value="2">2</option>
       <option value="3">3</option>
       <option value="4">4</option>
       <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 2</strong></h4>
	<h5>You are great in group settings and prefer working in a team.</h5>
	 	<select class="chosen-select" id="q2" required>
			 <option selected>Pick One</option>
       <option value="1">1 (Strongly Disagree)</option>
       <option value="2">2</option>
       <option value="3">3</option>
       <option value="4">4</option>
       <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 3</strong></h4>
	<h5>You enjoy going to poetry slams, museums, or art related events.</h5>
	 	<select class="chosen-select" id="q3" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 4</strong></h4>
	<h5>You like setting goals for yourself and seek to accomplish them.</h5>
	 	<select class="chosen-select" id="q4" required>
			<option selected>Pick One</option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 5</strong></h4>
	<h5>You love talking about social issues, politics, world news, etc.</h5>
	 	<select class="chosen-select" id="q5" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 6</strong></h4>
	<h5>You respect those who may not know as much as you, but want to learn.</h5>
	 	<select class="chosen-select" id="q6" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 7</strong></h4>
	<h5>You value friendships just as much as family.</h5>
	 	<select class="chosen-select" id="q7" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 8</strong></h4>
	<h5>You like to volunteer.</h5>
	 	<select class="chosen-select" id="q8" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 9</strong></h4>
	<h5>You enjoy board games or video games.</h5>
	 	<select class="chosen-select" id="q9" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

<h4><strong>Question 10</strong></h4>
	<h5>You enjoy having relaxing nights with friends, watching a movie, etc.</h5>
	 	<select class="chosen-select" id="q10" required>
			<option selected>Pick One</option>
	 		<option value=""></option>
      <option value="1">1 (Strongly Disagree)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (Strongly Agree)</option>
    </select>

	<br>
	<br>

	<!-- Submit Button -->
	<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>Submit</button>

	<hr>

</main>

<footer class="footer">
  <div class="container">
	  <p><a href="/api/friends" style="text-decoration: none;">API Friends List</a> |
				<a href="https://github.com/cesarmarroquin22/friend-finder" target="_blank"><i class="fa fa-github"></i> GitHub Repo</a></p>
  </div>
</footer>

<!-- Modal -->
<div id="resultsModal" class="modal fade" role="dialog">
	<div class="modal-dialog">

<!-- Modal content-->
<div class="modal-content">
	<div class="modal-header">
	  <h2 class="modal-title"><strong>Meet Your Friend Match:</strong></h2>
	</div>
	<div class="modal-body">
	<div class = "col-xs-12 col-md-6">
		<h2 id="matchName"></h2>
		  <img id="matchImg" src="" style="width:250px;height:275px" alt="">
	</div>
	</div>
	  <div class="modal-footer">
	    <button type="button" class="btn btn-default" id="close-modal" data-dismiss="modal">Close</button>
		</div>
</div>
	</div>
		</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>

</body>

</html>

<!-- *********************************************************************-->

<script type="text/javascript">

$("#submit").on("click", function(){
  event.preventDefault();

  if (($("#name").val().trim() !== "") && ($("#photo").val().trim() !== "")) {
    // Create an object for the user's data
    var userData = {
      name: $("#name").val(),
      photo: $("#photo").val(),
      scores: [
        $("#q1").val(), 
        $("#q2").val(), 
        $("#q3").val(), 
        $("#q4").val(), 
        $("#q5").val(), 
        $("#q6").val(), 
        $("#q7").val(), 
        $("#q8").val(), 
        $("#q9").val(), 
        $("#q10").val(), 
      ]
    };

    // Grab the URL of the website
    var currentURL = window.location.origin;

    // AJAX post the data to the friends API.
    $.post(currentURL + "/api/friends", userData, function(data){

      // Grab the result from the AJAX post so that the best match's name and photo are displayed.
      $("#matchName").text(data.name);
      $('#matchImg').attr("src", data.photo);

      // Show the modal with the best match
      $("#resultsModal").modal('toggle');

    });
}
else
{
  alert("Please fill out all fields before submitting!");
}

return false;
});

$('#resultsModal').on('hidden.bs.modal', function () {
window.location.reload(true);
})